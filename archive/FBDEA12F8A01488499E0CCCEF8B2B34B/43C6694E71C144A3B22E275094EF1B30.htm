
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="description" content=""> 
<meta name="keywords" content="">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9">
<title>Discuz! X2的批量替换论坛帖子标题和内容关键词方法.note</title>
<link rel="stylesheet" href="../../static/css/style.css">
</head>
<body>  
    <div class="doc" id="doc">
        <div class="header" id="header">
            <div class="logo"><a href="../../index.html" title="note2site" target="_self">note2site</a></div>
            <div class="links">
                <a href="https://github.com/likebeta/note2site">github</a>
            </div>
        </div>
        <div class="content" id="content">
            <div class="mod-left-side public-page" id="mod-left-side">
                <div class="mod-tree" id="mod-tree">
                    <div class="tree-wrap">
                        <div class="t-trunk">
                            <div class="t-branch">
                                <div class="t-panel">
                                    <div class="t-title note-title-block has-children expanded" id="my-note-area">
                                        <em>likebeta的共享笔记</em>
                                    </div>
                                    <ul class="t-folder note-content-block" id="categories" style="display:block;">
                                        <li>
                                            <div class="public-notes">
                                                <ul class="t-folder" style="display:block;" id="public-notes-con">
                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="life" href="/topic/0A45DFB25EC64A30997B9E30AEBC5661.htm">
                                                                <em class="txt">life</em>
                                                                <em class="num">(1)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="系统收藏" href="/topic/1f1f950cd331e95e7752e52027f0ec83.htm">
                                                                <em class="txt">系统收藏</em>
                                                                <em class="num">(1)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="微信收藏" href="/topic/2972DBC640DD44CB8605DAF46B52FBD4.htm">
                                                                <em class="txt">微信收藏</em>
                                                                <em class="num">(2)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="note2site" href="/topic/52C15BCC8FF941278249D2ADD8AC2B14.htm">
                                                                <em class="txt">note2site</em>
                                                                <em class="num">(1)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="调研" href="/topic/60B8AC9FD8864FBDB4715B1D67F0DD2A.htm">
                                                                <em class="txt">调研</em>
                                                                <em class="num">(2)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="读书笔记" href="/topic/6C1BCD692A7F4DB8849B6A466D275B14.htm">
                                                                <em class="txt">读书笔记</em>
                                                                <em class="num">(2)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="网文快捕" href="/topic/8E00330A442B49688B2ECEFE3E9A7FBA.htm">
                                                                <em class="txt">网文快捕</em>
                                                                <em class="num">(10)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="幽默" href="/topic/A8CD5F8E4625440592092A8E388729E4.htm">
                                                                <em class="txt">幽默</em>
                                                                <em class="num">(1)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="娱乐" href="/topic/B1D1A63E1E9B4186A70AF54B2C1365F6.htm">
                                                                <em class="txt">娱乐</em>
                                                                <em class="num">(8)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="来自网页剪报" href="/topic/B4E26D4400C742C183BEDB73CE419F6C.htm">
                                                                <em class="txt">来自网页剪报</em>
                                                                <em class="num">(1)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="语文" href="/topic/D39F0297644C451F8849CD5E735E6968.htm">
                                                                <em class="txt">语文</em>
                                                                <em class="num">(10)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title selected note-default-cate">
                                                            <a class="t-folder-icon" title="website" href="/topic/FBDEA12F8A01488499E0CCCEF8B2B34B.htm">
                                                                <em class="txt">website</em>
                                                                <em class="num">(11)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                    <li class="t-cate">
                                                        <div class="t-title">
                                                            <a class="t-folder-icon" title="来自手机" href="/topic/bdaf4c9b6c117fb8d796da808ab6ef4c_2.htm">
                                                                <em class="txt">来自手机</em>
                                                                <em class="num">(1)</em>
                                                            </a>
                                                        </div>
                                                    </li>													                                                </ul>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mod-public-ads"></div>
            <div class="mod-right-side public-page" id="mod-right-side">
                <div class="mod-main" id="mod-main">
                    <div class="main-wrap" id="main-wrap" style="margin-top:10px;">
                        <div class="right-top-wrap" id="right-top-wrap">
                            <div class="mod-note-title publicpage">
                                <h2>Discuz! X2的批量替换论坛帖子标题和内容关键词方法.note</h2>
                             </div>
                        </div>
                        <div class="mod-note-body publicpage-note-preview" id="note-list-wrap" style="top:50px;overflow-y:auto">
                            <div class="note-info hide" id="note-info">
                                <p class="detail-line time-line">
                                    <em class="create-time"><em class="label">创建时间：</em>1361356784</em>
                                    <em class="modify-time">修改时间： 1361356800</em>
                                </p>        
                            </div>
                            <div class="inote-editor mod-note-content" id="mod-note-content" height="100%">
                                <div id="note-content-wrap" style="font:16px/1.5 宋体">
                                    <div><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); ">做论坛的站长都知道，总是有各种广告各种垃圾信息在论坛里满天飞，有的时候这些广告里有很多“敏感”词语。Discuz!提供了关键词过滤的功能，可以设置禁止某些词语为非法，但设置过多对程序的速度多少有影响，再说发广告的用各种非正常格式替换跳过过滤，这个SEO隐患就不用说了，有的恶心的词语甚至可能导致关站。正好操作替换了下论坛数据，下面的语句很好用，分享下。</p><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); ">对于标题来说，进入phpadmin或空间提供的其它数据库管理工具运行SQL语句，分别用下面两条替换下就可以了。</p><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); ">UPDATE pre_forum_post SET subject = REPLACE(subject,’替换前关键词’,'替换后关键词’)</p><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); ">UPDATE pre_forum_thread&nbsp; SET subject = REPLACE(subject , ‘替换前关键词’ , ‘替换后关键词’) ;</p><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); ">如果替换帖子内容的话就是：</p><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); ">UPDATE pre_forum_post SET message=REPLACE(message,’替换前关键词’,'替换后关键词’);</p><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); "><span id="more-734" style="border: 0px; margin: 0px; padding: 0px;"></span></p><p style="border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; border-image: initial; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 5px; padding-right: 0px; padding-bottom: 5px; padding-left: 0px; line-height: 22px; color: rgb(51, 51, 51); font-family: 微软雅黑, PMingLiU, Verdana, Arial, Helvetica, sans-serif; font-size: 13px; background-color: rgb(250, 250, 250); ">如果站长用的是7.X的版本，表名可能会不同，不是pre_forum_XXX这样的表名，应该是 cdb_posts 的表名，替换就可以了。 如果你不确定是否正确可以进到phpadmin里看一下具体的<strong style="border: 0px; margin: 0px; padding: 0px;">表名</strong>对应一下<strong style="border: 0px; margin: 0px; padding: 0px;">详细内容</strong>，确认无误后再替换。操作前不要忘记替换前先备份。</p></div>                                </div>
                                <div class="mod-note-comment" style="display: none">
                                    <div class="note-comment-title"><h2>用户评论</h2></div>
                                    <div class="note-comment-body" id="note-comment-body">
                                        <div class="note-comment-empty" id="note-comment-empty">暂无评论。</div>  
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>